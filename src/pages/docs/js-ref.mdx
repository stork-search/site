import Link from 'next/link'
import ApiReferenceTable from '../../components/docs/api-reference'
import {
  registrationOptionData,
  resultObject,
  entryObject,
  excerptObject,
} from '../../lib/js-options'

export const getStaticProps = async (context) => {
  return {
    props: {
      pageTitle: 'JavaScript Reference',
      template: 'docs',
      data: {
        registrationOptionData,
        resultObject,
        entryObject,
        excerptObject,
      },
    },
  }
}

# Javascript API Reference

Just getting started? [Learn how to embed the search interface on your site.](/docs/interface)

The Stork Javascript library exposes a single global variable, `stork`, which has five methods. The method you'll most likely use is the `register()` method, which takes three parameters:

### `stork.register(name, url, options)`

This method initializes Stork, downloads your search index, and harnesses the DOM to make the search elements interactive.

- The **name** parameter is a string that defines which HTML elements Stork should attach to. This name should be the same as the name you put in the `data-stork` attributes in your [input and output elements](/docs/interface).
- The **url** parameter is a string that contains the URL of your index file. The file at this URL should be a publicly-available Stork index file generated by the <code>stork --build</code> command.
- The <strong>options</strong> parameter is an optional object whose available configuration keys are defined below. None of the keys are required.

<!--

### `stork.initialize(url)`

This method initializes Stork by fetching, compiling, and loading the WASM blob. It takes a single optional parameter, `url`, which defines the URL of the Stork WASM blob. If you want to self-host Stork, you must serve the WASM blob with the proper MIME type and pass the WASM blob into this method. If `url` is omitted, Stork will fall back to the WASM blob served from the Stork CDN.

### `stork.downloadIndex(name, url, options)`

This method downloads the index file from your server and registers it with the WASM executable. The parameters here are the same as the parameters for `stork.register()`.

### `stork.attach(name)`

This method attaches the Stork DOM methods to your existing HTML. This method can be run multiple times in a single page load, which can be helpful for single-page-applications that might create and destroy your existing search DOM elements.

### `stork.search(name, query)`

This method lets you programmatically search a Stork index from your page's Javascript. This method is meant to be used in scenarios where you don't want to use Stork's DOM management at all. It returns an array of **Result** objects.

-->

## Registration Options

<ApiReferenceTable options={props.data.registrationOptionData} />

## The Result Object

<ApiReferenceTable options={props.data.resultObject} />

## The Entry Object

<ApiReferenceTable options={props.data.entryObject} />

## The Excerpt Object

<ApiReferenceTable options={props.data.excerptObject} />

## Other methods

There are more methods on the `stork` global variable that afford more control over loading the WASM binary and/or search index, attaching Stork into your DOM, or running searches. For more information on how to use these methods, read the [advanced JavaScript Usage](/docs/advanced-js) documentation.

### `stork.initialize(wasm_url)`

Initializes the WASM library. The optional `wasm_url` parameter lets you specify a URL from which the WASM binary should be downloaded.

### `stork.downloadIndex(name, url, options)`

Downloads a search index file and makes it addressable from the `attach()` or `search()` methods by naming it. The three parameters here are identical to the `stork.register()` parameters.

### `stork.attach(name)`

Harnesses existing DOM elements to provide as-you-type search results for a downloaded index.

### `stork.search(name, query)`

Runs a search and returns an array of **Result** objects.
